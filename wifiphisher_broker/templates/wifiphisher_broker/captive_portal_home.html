{% extends "wp3_basic/base.html" %}
{% block content %}
    {% load static %}

    {% if user.is_authenticated %}
        <div class="card" style="width: 26rem;">
            <img class="card-img-top" src="{% static 'wp3_basic/imgs/captive_portal/dragon2.png' %}" alt="Card image cap">
            <div class="card-body">
            
                <h4>Captive Portal</h4>
                <h5>Status: Not Running<h5>

                <!-- Captive Portal Form -->
                <form method="POST" action="{% url 'captive_portal_launch' %}">
                {% csrf_token %}

                    <!-- Interface -->
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="interface">Interface</label>
                        </div>
                        <select class="custom-select" id="interface" name="interface">
                            {% for interface in interfaces %}
                                <option value="{{ interface }}">{{ interface }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Scenario -->
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="scenario">Scenario</label>
                        </div>
                        <select class="custom-select" id="scenario" name="scenario">
                            {% for scenario in scenarios %}
                                <option value="{{ scenario }}">{{ scenario }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- ESSID -->
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon3">&#160 ESSID &#160</span>
                        </div>
                        <input type="text" class="form-control" id="essid" name="essid" aria-describedby="basic-addon3" value="test">
                    </div>

                    <!-- Launch! -->
                    <div>
                        <button class="btn btn-primary" type="submit">
                            Launch!
                        </button>
                    </div>
                </form>
            </div>

            <!-- Historic Captures -->
            <div class="card-body">
                <h5>Historic Captures</h5>
                <table class="table table-striped">
                    <thead>
                        <tr>
                        <th scope="col">Date</th>
                        <th scope="col">Duration(s)</th>
                        <th scope="col">Interface</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for historic_scan in historic_scans %}
                            <tr>
                                
                                <td><a href="{% url 'ng_wifi_show_scan_results' %}?scan_id={{ historic_scan.id }}">{{ historic_scan.start_time }}</a></td>
                                <td>{{ historic_scan.duration_s }} </td>
                                <td>{{ historic_scan.interface }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    {% endif %}
{% endblock %}

